# NeuroLake Configuration
# Copy this file to .env and update with your settings

# =============================================================================
# ENVIRONMENT
# =============================================================================
NEUROLAKE_ENVIRONMENT=development  # development, staging, production
NEUROLAKE_DEBUG=false

# Application
NEUROLAKE_APP_NAME=NeuroLake
NEUROLAKE_APP_VERSION=0.1.0

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================

# Connection
NEUROLAKE_DATABASE__HOST=localhost
NEUROLAKE_DATABASE__PORT=5432
NEUROLAKE_DATABASE__DATABASE=neurolake
NEUROLAKE_DATABASE__USERNAME=neurolake
NEUROLAKE_DATABASE__PASSWORD=dev_password_change_in_prod

# Connection Pool
NEUROLAKE_DATABASE__POOL_SIZE=20
NEUROLAKE_DATABASE__MAX_OVERFLOW=10
NEUROLAKE_DATABASE__POOL_TIMEOUT=30
NEUROLAKE_DATABASE__POOL_RECYCLE=3600

# Performance
NEUROLAKE_DATABASE__ECHO_SQL=false
NEUROLAKE_DATABASE__STATEMENT_TIMEOUT=60000

# SSL
NEUROLAKE_DATABASE__SSLMODE=prefer  # disable, allow, prefer, require
# NEUROLAKE_DATABASE__SSLCERT=/path/to/cert.pem
# NEUROLAKE_DATABASE__SSLKEY=/path/to/key.pem

# =============================================================================
# STORAGE (MinIO/S3)
# =============================================================================

# Connection
NEUROLAKE_STORAGE__ENDPOINT=localhost:9000
NEUROLAKE_STORAGE__ACCESS_KEY=neurolake
NEUROLAKE_STORAGE__SECRET_KEY=dev_password_change_in_prod
NEUROLAKE_STORAGE__SECURE=false
NEUROLAKE_STORAGE__REGION=us-east-1

# Buckets
NEUROLAKE_STORAGE__DATA_BUCKET=data
NEUROLAKE_STORAGE__TEMP_BUCKET=temp
NEUROLAKE_STORAGE__ARCHIVE_BUCKET=archive

# Performance
NEUROLAKE_STORAGE__MULTIPART_THRESHOLD=52428800  # 50MB in bytes
NEUROLAKE_STORAGE__MAX_CONCURRENCY=10

# Paths
NEUROLAKE_STORAGE__NCF_PREFIX=ncf/
NEUROLAKE_STORAGE__TEMP_PREFIX=temp/

# =============================================================================
# REDIS (Cache)
# =============================================================================

# Connection
NEUROLAKE_REDIS__HOST=localhost
NEUROLAKE_REDIS__PORT=6379
NEUROLAKE_REDIS__DB=0
# NEUROLAKE_REDIS__PASSWORD=your_redis_password

# Connection Pool
NEUROLAKE_REDIS__MAX_CONNECTIONS=50
NEUROLAKE_REDIS__SOCKET_TIMEOUT=5
NEUROLAKE_REDIS__SOCKET_CONNECT_TIMEOUT=5

# Performance
NEUROLAKE_REDIS__DECODE_RESPONSES=true

# Cache TTL (seconds)
NEUROLAKE_REDIS__DEFAULT_TTL=3600
NEUROLAKE_REDIS__QUERY_RESULT_TTL=1800
NEUROLAKE_REDIS__METADATA_TTL=7200

# =============================================================================
# QDRANT (Vector Database)
# =============================================================================

# Connection
NEUROLAKE_QDRANT__HOST=localhost
NEUROLAKE_QDRANT__PORT=6333
NEUROLAKE_QDRANT__GRPC_PORT=6334
# NEUROLAKE_QDRANT__API_KEY=your_qdrant_api_key

# Collections
NEUROLAKE_QDRANT__EMBEDDINGS_COLLECTION=neurolake_embeddings
NEUROLAKE_QDRANT__VECTOR_SIZE=1536

# Performance
NEUROLAKE_QDRANT__PREFER_GRPC=true
NEUROLAKE_QDRANT__TIMEOUT=60

# =============================================================================
# LLM SETTINGS
# =============================================================================

# Provider Selection
NEUROLAKE_LLM__DEFAULT_PROVIDER=openai  # openai, anthropic

# Rate Limiting
NEUROLAKE_LLM__MAX_REQUESTS_PER_MINUTE=50
NEUROLAKE_LLM__MAX_CONCURRENT_REQUESTS=5

# --- OpenAI ---
# NEUROLAKE_LLM_OPENAI__API_KEY=sk-...
# NEUROLAKE_LLM_OPENAI__ORGANIZATION=org-...
NEUROLAKE_LLM_OPENAI__MODEL=gpt-4-turbo-preview
NEUROLAKE_LLM_OPENAI__EMBEDDING_MODEL=text-embedding-3-large
NEUROLAKE_LLM_OPENAI__TEMPERATURE=0.7
NEUROLAKE_LLM_OPENAI__MAX_TOKENS=4096
NEUROLAKE_LLM_OPENAI__TIMEOUT=60

# --- Anthropic ---
# NEUROLAKE_LLM_ANTHROPIC__API_KEY=sk-ant-...
NEUROLAKE_LLM_ANTHROPIC__MODEL=claude-3-5-sonnet-20241022
NEUROLAKE_LLM_ANTHROPIC__TEMPERATURE=0.7
NEUROLAKE_LLM_ANTHROPIC__MAX_TOKENS=4096
NEUROLAKE_LLM_ANTHROPIC__TIMEOUT=60

# =============================================================================
# API (FastAPI)
# =============================================================================

# Server
NEUROLAKE_API__HOST=0.0.0.0
NEUROLAKE_API__PORT=8000
NEUROLAKE_API__RELOAD=false
NEUROLAKE_API__WORKERS=4

# CORS
NEUROLAKE_API__CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
NEUROLAKE_API__CORS_ALLOW_CREDENTIALS=true

# Security
NEUROLAKE_API__SECRET_KEY=dev_secret_key_change_in_production_use_openssl_rand_hex_32
NEUROLAKE_API__ALGORITHM=HS256
NEUROLAKE_API__ACCESS_TOKEN_EXPIRE_MINUTES=30

# Rate Limiting
NEUROLAKE_API__RATE_LIMIT_ENABLED=true
NEUROLAKE_API__RATE_LIMIT_REQUESTS=100
NEUROLAKE_API__RATE_LIMIT_WINDOW=60

# Documentation
NEUROLAKE_API__DOCS_URL=/docs
NEUROLAKE_API__REDOC_URL=/redoc
NEUROLAKE_API__OPENAPI_URL=/openapi.json

# =============================================================================
# MONITORING
# =============================================================================

# Metrics
NEUROLAKE_MONITORING__ENABLE_METRICS=true
NEUROLAKE_MONITORING__METRICS_PORT=9090

# Tracing
NEUROLAKE_MONITORING__ENABLE_TRACING=true
NEUROLAKE_MONITORING__JAEGER_HOST=localhost
NEUROLAKE_MONITORING__JAEGER_PORT=6831

# Logging
NEUROLAKE_MONITORING__LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
NEUROLAKE_MONITORING__LOG_FORMAT=json  # json, text
# NEUROLAKE_MONITORING__LOG_FILE=/path/to/neurolake.log

# =============================================================================
# PATHS (Local)
# =============================================================================
# NEUROLAKE_DATA_DIR=./data
# NEUROLAKE_CACHE_DIR=./.cache
# NEUROLAKE_LOGS_DIR=./logs

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================
# For production, ensure you:
# 1. Change all default passwords
# 2. Set NEUROLAKE_ENVIRONMENT=production
# 3. Set NEUROLAKE_DEBUG=false
# 4. Use strong NEUROLAKE_API__SECRET_KEY (32+ random bytes)
# 5. Enable SSL for database (NEUROLAKE_DATABASE__SSLMODE=require)
# 6. Enable HTTPS for storage (NEUROLAKE_STORAGE__SECURE=true)
# 7. Configure proper CORS origins
# 8. Set up API keys for LLM providers
# 9. Configure Redis password
# 10. Set appropriate rate limits

# =============================================================================
# DOCKER COMPOSE OVERRIDE
# =============================================================================
# When using Docker Compose, some services use different hostnames:
# NEUROLAKE_DATABASE__HOST=postgres
# NEUROLAKE_REDIS__HOST=redis
# NEUROLAKE_QDRANT__HOST=qdrant
# NEUROLAKE_STORAGE__ENDPOINT=minio:9000
# NEUROLAKE_MONITORING__JAEGER_HOST=jaeger

# =============================================================================
# SPARK CONFIGURATION
# =============================================================================

# Application
NEUROLAKE_SPARK__APP_NAME=NeuroLake

# Executor Memory
NEUROLAKE_SPARK__EXECUTOR_MEMORY=4g
NEUROLAKE_SPARK__EXECUTOR_MEMORY_OVERHEAD=1g
NEUROLAKE_SPARK__EXECUTOR_CORES=4

# Driver Memory
NEUROLAKE_SPARK__DRIVER_MEMORY=2g
NEUROLAKE_SPARK__DRIVER_MEMORY_OVERHEAD=512m
NEUROLAKE_SPARK__DRIVER_CORES=2

# Dynamic Allocation
NEUROLAKE_SPARK__DYNAMIC_ALLOCATION_ENABLED=true
NEUROLAKE_SPARK__DYNAMIC_ALLOCATION_MIN_EXECUTORS=1
NEUROLAKE_SPARK__DYNAMIC_ALLOCATION_MAX_EXECUTORS=10
NEUROLAKE_SPARK__DYNAMIC_ALLOCATION_INITIAL_EXECUTORS=2

# Adaptive Query Execution
NEUROLAKE_SPARK__AQE_ENABLED=true
NEUROLAKE_SPARK__AQE_COALESCE_PARTITIONS_ENABLED=true
NEUROLAKE_SPARK__AQE_SKEW_JOIN_ENABLED=true

# Shuffle
NEUROLAKE_SPARK__SHUFFLE_PARTITIONS=200
NEUROLAKE_SPARK__SHUFFLE_COMPRESS=true

# Compression
NEUROLAKE_SPARK__COMPRESSION_CODEC=zstd

# NeuroLake Optimizations
NEUROLAKE_SPARK__NEUROLAKE_NCF_ENABLED=true
NEUROLAKE_SPARK__NEUROLAKE_CACHE_ENABLED=true
NEUROLAKE_SPARK__NEUROLAKE_PUSHDOWN_ENABLED=true
NEUROLAKE_SPARK__NEUROLAKE_VECTORIZED_READER=true

# S3/MinIO (inherits from STORAGE settings if not set)
NEUROLAKE_SPARK__S3_ENABLED=true
# NEUROLAKE_SPARK__S3_ENDPOINT=http://localhost:9000
# NEUROLAKE_SPARK__S3_ACCESS_KEY=neurolake
# NEUROLAKE_SPARK__S3_SECRET_KEY=dev_password_change_in_prod
NEUROLAKE_SPARK__S3_PATH_STYLE_ACCESS=true
NEUROLAKE_SPARK__S3_MAX_CONNECTIONS=100

# Delta Lake
NEUROLAKE_SPARK__DELTA_ENABLED=true

# Monitoring
NEUROLAKE_SPARK__LOG_LEVEL=WARN
NEUROLAKE_SPARK__UI_ENABLED=true
NEUROLAKE_SPARK__UI_PORT=4040

# Performance
NEUROLAKE_SPARK__SPECULATION_ENABLED=true
NEUROLAKE_SPARK__MEMORY_FRACTION=0.6
